language: ruby
bundler_args: "--without assets:development:production --path=~/.bundle"
rvm:
- 2.1.1
before_install:
- 'echo ''gem: --no-document'' > ~/.gemrc'
- gem install bundler bundle_cache
- bundle_cache_install
addons:
  postgresql: '9.3'
before_script:
- psql -c 'create database ohana_api_test;' -U postgres
- psql -U postgres -q -d ohana_api_test -f db/structure.sql
- cp config/database.travis.yml config/database.yml
after_script:
- bundle_cache
notifications:
  campfire:
    rooms:
    - secure: |-
        eEuzoYFXLPeIMt+zHGzZp6XCvbfxRDe8FA3kVwrNRB0zoOktPRZXD9O8ng2z
        x2Yg8C7i1unstuW0bjPvwphpdxJOTFSxliw6P4Xk1Y9HnTYQqqUbDat/zL9c
        AyjYezuRQgYFSBP2BgNZ2RL9RiLSyLQBWhcHGB0yBS6rsheKWbk=
    on_success: never
    on_failure: always
  webhooks: http://cfa-project-monitor.herokuapp.com/projects/f4e235b6-734e-4d63-a19b-32426335c047/status
env:
  global:
  - ADMIN_APP_TOKEN=testing123
  - BUNDLE_ARCHIVE="ohana_api_bundle"
  - AWS_S3_BUCKET="ohana-api-gems"
  - RAILS_ENV=test
  - secure: eXPEvgEP0SeuPOtySMSCxyVUBo15Ab3HLAjJlIwRjOOE7KwyDAaAjyd01P2/z3Cwxtki1FXyzY3GcZr4xQYN3S82FMNtp5TfTrqCIqNtqospL16Ui2Y4+et5wdsftWAcnegLZAeKn5rxWNExOVIFpSnHGU0Sel+kQ11El8NQwlk=
